---
title: "Pythagorean means"
date: 2024-02-15T21:43:42+07:00
---

# Что это такое?
Пифагорейское среднее включает в себя арифметическое среднее (AM), геометрическое среднее (GM) и гармоническое среднее (HM).
# Формулы 
$$
AM(x_1, ..., x_n) = \frac{x_1 + ... + x_n}{n}
$$
$$
GM(x_1,...,x_n) = \sqrt[n]{|x_1 \times ...\times x_n|}
$$
$$
HM(x_1, ..., x_n) = \frac{n}{\frac{1}{x_1} + ... + \frac{1}{x_n}}
$$
# Где и что используется?
- Арифметическое среднее - обычно используется, когда речь идет о количестве каких-нибудь объектов, о чем-то что можно измерить, очков и тд. 
- Геометрическое среднее - используется, когда сет чисел растет по геометрическим законам. Например, когда акции компании за один период выросли на 1%, а на следующий период выросли еще на один процент, во второй раз величина этого одного процента будет больше, потому что число на которое оно выросло будет больше.
- Гармоническое среднее - самое непонятное из этих средних. Поэтому я с ним разберусь отдельно ниже.
## Как работает гармоническое среднее?
Как мы видим из формулы, гармоническое среднее - это среднее, в котором вес наблюдения обратно пропорционален его величине. 
Это значит, что, когда мы суммируем основной знаменатель, нам приходится приводить его к общему знаменателю, а значит учитывается какую лепту вносит каждый элемент в эту сумму. Ну а затем по логике деления числителя на дробь, знаменатель дроби в знаменателе переходит в числитель, который делится на сумму всех этих лепт, внесенных пропорционально каждым слагаемым.

Такую среднюю применяют, когда нужно сохранить исходный результат. Отличный пример задачи, где следует использовать гармоническое среднее - это задача про машину, которая едет один участок пути с одной скоростью, а затем с другой. А нам надо найти скорость, с которой бы другая машина проехала тот же участок дороги за то же время. арифметическим средним такую задачу уже не решить.
# Как относятся друг к другу эти средние?

## AM vs GM inequality
Для того, чтобы ответить на вопрос, как относятся Арифметическое среднее к геометрическому среднему, можно воспользоваться [[Jensen's Inequality|Неравенством Дженсона]]. 
Для этого возьмем выпуклую функцию - логарифм. Получается, что логарифм арифметического среднего больше или равен среднему логарифмов каждого элемента.
Так это записывается математически:
$$
-log(\frac{1}{N} \sum_i{x_i}) \le -\frac{1}{N} \sum_i {log(x_i)}
$$
Далее умножим на -1 обе части для красоты, и сделаем преобразования. Внесем для правой части значение 1/N под логарифм, а также воспользуемся свойством, что сумма логарифмов, равна произведению параметров логарифма
$$
\begin{split}
log(\frac{1}{N} \sum_i{x_i}) &\ge \frac{1}{N} \sum_i {log(x_i)} \newline
log(\frac{1}{N} \sum_i{x_i}) &\ge {log(\prod_i x_i^{1/N})} \newline
\end{split}
$$
Теперь если мы посмотрим на аргументы логарифмов в неравенстве, то заметим, что аргумент логарифма слева больше или равен аргументу логарифма справа.
Покажем это формулой:
$$
\begin{split}
\frac{1}{N} \sum_i{x_i} &\ge \prod_i x_i^{1/N} \newline
\frac{1}{N} \sum_i{x_i} &\ge \sqrt[N]{x_1 * x_2 ... * x_i} \newline
\end{split}
$$
Полученное неравенство как раз и означает отношение среднего арифметического и среднего геометрического. То есть AM больше или равно GM

## GM vs HM

Здесь предлагаю рассмотреть предыдущее неравенство, только вместо $x_i$, возьмем обратные ему значения - $\frac{1}{x_i}$:
$$
\frac{1}{N} \sum_i{\frac{1}{x_i}} \ge \sqrt[N]{\frac{1}{x_1} * \frac{1}{x_2} ... * \frac{1}{x_i}}
$$

Затем воспользуемся трюком и обратим обе стороны неравенства в обратные числа. В математике на английском эти числа называются reciprocals - [Обратные числа](https://en.wikipedia.org/wiki/Multiplicative_inverse)
Суть в том, что при обращении обеих частей получается следующая формула:
$$
\frac{N}{\sum_i \frac{1}{x_i}} \le \sqrt[N]{x_1 * x_2 ... * x_i}
$$

И если присмотреться, то как раз и окажется, что левая часть это формула гармонического среднего, а правая это формула геометрического среднего.
Получается, что гармоническое среднее меньше, чем геометрическое.

$$
HM \le GM \le AM
$$

# Как изменяются все эти средние

## AM

Чтобы посмотреть на то, как изменяются функции, посчитаем производную функции от x:
$$
\frac{\delta AM}{\delta x_i} = (\frac{1}{N} * \sum x_i)' = \frac{1}{N}
$$
Выходит, что независимо от того, как изменяется какое либо значение x, значение функции монотонно растет на константу 1/N

Для дата саенса AM менее интересно, поскольку его значение на самом деле никак не зависит от самих значений x.
А теперь рассмотрим остальные средние.

## GM
$$
\begin{split}
\frac{\delta GM}{\delta x_i} &= (\sqrt[N]{x_1 * x_2 ... * x_i})' = \newline
&= \frac{1}{N} x_i^{\frac{1-N}{N}} * \sqrt[N]{x_1 * x_2 ... x_{i-1}} = \newline
&= \frac{1}{N} x_i^{\frac{1}{N}} * x_i^{-1} * \sqrt[N]{x_1 * x_2 ... x_{i-1}} = \newline
&= \frac{1}{N} \frac{GM}{x_i}
\end{split}
$$
Путем несложных преобразований, выходит, что функция геометрического среднего растет в соответствии со значениями, которые она принимает, поскольку в числители стоит само значение геометрического среднего, а также функция изменяется настолько быстро, насколько много она принимает значений и насколько рассматриваемое значение большое, поскольку в знаменателе стоит $x_i$, а также применяется коэффициент 1/N. Можно сказать, что GM имеет своего рода регуляризацию, поскольку если значение x_i будет намного больше остальных, то значение функции изменится не так сильно.

## HM
Здесь будут преобразования посложнее, но тоже подъемно для маркдауна, поэтому вот:
$$
\begin{split}
\frac{\delta HM}{\delta x_i} &= (N\frac{1}{\sum {\frac{1}{x_i}}})' = \newline
&= N * (\frac{1}{\sum {\frac{1}{x_i}}})' = \newline
&= - N * \frac{1}{(\sum {\frac{1}{x_i}})^2} * (\frac{1}{x_i})' = \newline
&= - N * \frac{1}{(\sum {\frac{1}{x_i}})^2} * -\frac{1}{x_i^2} \newline
&= N * HM^2 * \frac{1}{x_i^2} \newline
&= N * \left(\frac{HM}{x_i}\right)^2 \newline
\end{split}
$$
Как мы видим, функция гармонического среднего изменяется в квадрате, в отличие от функции геометрического среднего. То же касается и регуляризации, поскольку значение знаменателя также возводится в квадрат
# Источники
>https://www.youtube.com/watch?v=dN3UWN-aNOU
>
>https://www.grandars.ru/student/statistika/srednyaya-garmonicheskaya.html
>
>https://waksoft.susu.ru/2015/09/26/5-variantov-srednego-ili-kakaya-srednyaya-temperatura-v-bolnitse/

